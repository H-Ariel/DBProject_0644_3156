# DBProject_0644_3156
## ××¢×¨×›×ª × ×™×”×•×œ ××•×©×‘×•×ª ×‘×—×œ×œ

**×©××•×ª ×”××’×™×©×™×:** ××¨×™××œ ×—×œ×™×œ×™ ×•××¨×‘×œ ×¤××¨  
**×™×—×™×“×” × ×‘×—×¨×ª:** ×× ×©×™ ×¦×•×•×ª  

---
## ×ª×•×›×Ÿ ×¢× ×™×™× ×™×
1. [××‘×•×](#××‘×•×)  
2. [×©×œ×‘ 1 - ×¢×™×¦×•×‘ ×•×‘× ×™×™×ª ×‘×¡×™×¡ ×”× ×ª×•× ×™×](#×©×œ×‘-1---×¢×™×¦×•×‘-×•×‘× ×™×™×ª-×‘×¡×™×¡-×”× ×ª×•× ×™×)  
â€ƒ2.1 [×ª×¨×©×™× ERD](#×ª×¨×©×™×-erd)  
â€ƒ2.2 [×ª×¨×©×™× DSD](#×ª×¨×©×™×-dsd)  
â€ƒ2.3 [×©×™×˜×•×ª ×œ×”×›× ×¡×ª ×”× ×ª×•× ×™×](#×©×™×˜×•×ª-×œ×”×›× ×¡×ª-×”× ×ª×•× ×™×)  
â€ƒâ€ƒ2.3.1 [×™×¦×™×¨×ª × ×ª×•× ×™× ××•×˜×•××˜×™×ª](#×™×¦×™×¨×ª-× ×ª×•× ×™×-×‘××•×¤×Ÿ-××•×˜×•××˜×™)  
â€ƒâ€ƒ2.3.2 [×™×™×‘×•× ××§×•×‘×¥ CSV](#×™×™×‘×•×-× ×ª×•× ×™×-××§×•×‘×¥-csv)  
â€ƒâ€ƒ2.3.3 [×”×›× ×¡×ª × ×ª×•× ×™× ×¢× ×¤×™×™×ª×•×Ÿ](#×”×›× ×¡×ª-× ×ª×•× ×™×-×‘×××¦×¢×•×ª-×¡×§×¨×™×¤×˜-×¤×™×™×ª×•×Ÿ)  
â€ƒâ€ƒ2.3.4 [×”×›× ×¡×ª × ×ª×•× ×™× ×¢× SQL](#×”×›× ×¡×ª-× ×ª×•× ×™×-×‘×××¦×¢×•×ª-×¡×§×¨×™×¤×˜-sql)  
â€ƒ2.4 [×¦×™×œ×•× ××¡×š ×©×œ ×’×™×‘×•×™](#×¦×™×œ×•×-××¡×š-×’×™×‘×•×™-×”× ×ª×•× ×™×)  
â€ƒ2.5 [×¦×™×œ×•× ××¡×š ×©×œ ×©×—×–×•×¨](#×¦×™×œ×•×-××¡×š-×©×œ-×©×—×–×•×¨-×”× ×ª×•× ×™×-×××—×©×‘-××—×¨)  

3. [×©×œ×‘ 2 - ×©××™×œ×ª×•×ª SQL](#×©×œ×‘-2---×©××™×œ×ª×•×ª-sql)  
â€ƒ3.1 [×©××™×œ×ª×•×ª SELECT](#×©××™×œ×ª×•×ª-select)  
â€ƒâ€ƒ3.1.1 [×—×•×§×¨×™× ×•×ª×—×•× ××—×§×¨](#1-×©××•×ª-×”×—×•×§×¨×™×-×ª×—×•×-××—×§×¨-×•×ª××¨×™×š-×”×¦×˜×¨×¤×•×ª-×©×œ-×”×¦×•×•×ª×™×-×”××ª××™××™×-×œ×”×)  
â€ƒâ€ƒ3.1.2 [×¦×•×•×ª×™× ×•×¦×™×•×“](#2-×©××•×ª-×”×¦×•×•×ª×™×-××¡×¤×¨-×”××™×›×©×•×¨-×©×©×•×™×š-×œ×›×œ-×¦×•×•×ª)  
â€ƒâ€ƒ3.1.3 [×¦×™×•×“ ×‘Ö¾3+ ××©×™××•×ª](#3-×¦×™×•×“-×©××•×œ×-×‘×™×•×ª×¨-×-3-××©×™××•×ª)  
â€ƒâ€ƒ3.1.4 [××•×©×‘×•×ª ×•×¦×™×•×“ ×œ×¤× ×™ 2010](#4-×©××•×ª-×”××•×©×‘×•×ª-×©×”×•×§××•-×œ×¤× ×™-2010-×•×©×˜×—×•-×”×¦×™×•×“-×©× ×¨×›×©-×œ×›×œ-××—×ª)  
â€ƒâ€ƒ3.1.5 [×—×•×§×¨×™× ×‘×ª×¤×§×™×“](#5-×—×•×§×¨×™×-×‘×ª×¤×§×™×“-×¡×¤×¦×™×¤×™-×•×¦×•×•×ª×™×-×©×¦×•×¨×¤×•-××œ×™×”×)  
â€ƒâ€ƒ3.1.6 [××¡×¤×¨ ×—×•×§×¨×™× ×‘×¦×•×•×ª](#6-××¡×¤×¨-×—×•×§×¨×™×-×©× ××¦××™×-×‘×›×œ-×¦×•×•×ª)  
â€ƒâ€ƒ3.1.7 [×¦×™×•×“ ××—×¨×™ 2015](#7-×¤×¨×˜×™-×”××™×›×©×•×¨-×©× ×¨×›×©-×œ××—×¨-2015)  
â€ƒâ€ƒ3.1.8 [×¦×•×•×ª×™× ×•××©×™××•×ª ×‘Ö¾2019](#8-××™×“×¢-×¢×œ-×”×¦×•×•×ª×™×-×•×”××©×™××•×ª-×©×œ×”×-×‘-2019)  
â€ƒ3.2 [×©××™×œ×ª×•×ª UPDATE](#×©××™×œ×ª×•×ª-update)  
â€ƒâ€ƒ3.2.1 [×¢×“×›×•×Ÿ ×ª××¨×™×›×™ ×”×¦×˜×¨×¤×•×ª](#1-×¢×“×›×•×Ÿ-×ª××¨×™×š-×”×¦×˜×¨×¤×•×ª-×©×œ-×¦×•×•×ª×™×-×©×”×¦×˜×¨×¤×•-×œ×¤× ×™-2015)  
â€ƒâ€ƒ3.2.2 [×¢×“×›×•×Ÿ ×¡×˜×˜×•×¡ ×ª×©×ª×™×•×ª](#2-×¢×“×›×•×Ÿ-×¡×˜×˜×•×¡-×©×œ-×ª×©×ª×™×•×ª-×œ××•×©×‘×•×ª-×©×¤×¨×¡××•-××©×™××•×ª-×œ××—×¨-2020)  
â€ƒâ€ƒ3.2.3 [×¢×“×›×•×Ÿ ×ª×¤×§×™×“ ×œ×¤×™ ×ª×—×•×](#3-×¢×“×›×•×Ÿ-×ª×¤×§×™×“×™×-×©×œ-×—×•×§×¨×™×-×œ×¤×™-×ª×—×•×-××—×§×¨)  
â€ƒ3.3 [×©××™×œ×ª×•×ª DELETE](#×©××™×œ×ª×•×ª-delete)  
â€ƒâ€ƒ3.3.1 [××—×™×§×ª ×¦×™×•×“ ×‘Ö¾2+ ××©×™××•×ª](#1-××—×™×§×ª-×©×™××•×©-×‘×¦×™×•×“-×©×©×•×™×š-×œ×¤×—×•×ª-×œ-2-××©×™××•×ª)  
â€ƒâ€ƒ3.3.2 [××—×™×§×ª ×—×•×§×¨×™× ×××©×™××•×ª ××—×¨×™ 2020](#2-××—×™×§×ª-×—×•×§×¨×™×-×©× ××¦××™×-×‘×¦×•×•×ª×™×-×©××‘×¦×¢×™×-××©×™××•×ª-××—×¨×™-2020)  
â€ƒâ€ƒ3.3.3 [××—×™×§×ª ×ª×©×ª×™×•×ª ×œ× ×¤×¢×™×œ×•×ª](#3-××—×™×§×ª-×ª×©×ª×™×•×ª-×œ×-×¤×¢×™×œ×•×ª-××›×œ-×”××•×©×‘×•×ª)  


---
## ××‘×•×

×”××¢×¨×›×ª ××™×•×¢×“×ª ×œ× ×™×”×•×œ ××™×“×¢ ××•×“×•×ª ××•×©×‘×•×ª ×—×œ×œ×™×•×ª. ×”× ×ª×•× ×™× ×”× ×©××¨×™× ×›×•×œ×œ×™× ××™×“×¢ ×¢×œ ×›×œ ×—×œ×œ×™×ª, ×”××©×™××•×ª ×©×œ×”, ×”×¦×™×•×“ ×‘×• × ×¢×©×” ×©×™××•×© ×‘××©×™××”, ×•×× ×©×™ ×”×¦×•×•×ª ×”×××›×œ×¡×™× ××ª ×”×—×œ×œ×™×ª. ×”×¤×•× ×§×¦×™×•× ×œ×™×•×ª ×”××¨×›×–×™×ª ×××¤×©×¨×ª ×”×•×¡×¤×ª ×—×œ×œ×™×ª ×—×“×©×”, ×‘× ×™×™×ª ×¦×•×•×ª ××¡×•×“×¨ ×¢× ×ª×¤×§×™×“×™× ××•×’×“×¨×™× ×œ×›×œ ××™×© ×¦×•×•×ª.

---
# ×©×œ×‘ 1 - ×¢×™×¦×•×‘ ×•×‘× ×™×™×ª ×‘×¡×™×¡ ×”× ×ª×•× ×™×

## ×ª×¨×©×™× ERD
![image](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%90/ERDAndDSTFiles/ERD.png?raw=true)

## ×ª×¨×©×™× DSD
![image](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%90/ERDAndDSTFiles/DSD.png?raw=true)

---

## ×©×™×˜×•×ª ×œ×”×›× ×¡×ª ×”× ×ª×•× ×™×

### ×™×¦×™×¨×ª × ×ª×•× ×™× ×‘××•×¤×Ÿ ××•×˜×•××˜×™
![generatedata](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%90/screenshots/generatedata.jpg?raw=true)

### ×™×™×‘×•× × ×ª×•× ×™× ××§×•×‘×¥ CSV
![import-from-csv](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%90/screenshots/import-from-csv.jpg?raw=true)

### ×”×›× ×¡×ª × ×ª×•× ×™× ×‘×××¦×¢×•×ª ×¡×§×¨×™×¤×˜ ×¤×™×™×ª×•×Ÿ
ğŸ“œ **[python script](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%90/programing/init-script.py)**

### ×”×›× ×¡×ª × ×ª×•× ×™× ×‘×××¦×¢×•×ª ×¡×§×¨×™×¤×˜ SQL
ğŸ“œ **[sql script](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%90/DataImportFiles/insert_Crew.sql)**

---
## ×¦×™×œ×•× ××¡×š ×’×™×‘×•×™ ×”× ×ª×•× ×™×
![backup](https://github.com/user-attachments/assets/f35b84fc-30e0-47f5-a0c6-b001a4fcc011)

---
## ×¦×™×œ×•× ××¡×š ×©×œ ×©×—×–×•×¨ ×”× ×ª×•× ×™× ×××—×©×‘ ××—×¨
![restore](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%90/screenshots/restore.jpg?raw=true)

---

# ×©×œ×‘ 2 - ×©××™×œ×ª×•×ª SQL

## ×©××™×œ×ª×•×ª SELECT

### 1. ×©××•×ª ×”×—×•×§×¨×™×, ×ª×—×•× ××—×§×¨, ×•×ª××¨×™×š ×”×¦×˜×¨×¤×•×ª ×©×œ ×”×¦×•×•×ª×™× ×”××ª××™××™× ×œ×”×
```sql
SELECT
	R.NAME,
	R.RESEARCH_FIELD,
	C.NAME AS CREW_NAME,
	C.JOINED_DATE
FROM
	RESEARCHER R
	JOIN CREW C ON R.CREW_ID = C.CREW_ID;
```
![select 1](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/select-1.jpg?raw=true)

### 2. ×©××•×ª ×”×¦×•×•×ª×™×, ××¡×¤×¨ ×”××™×›×©×•×¨ ×©×©×•×™×š ×œ×›×œ ×¦×•×•×ª
```sql
SELECT
	C.NAME AS CREW_NAME,
	COUNT(U.EQUIPMENT_ID) AS EQUIPMENT_COUNT
FROM
	CREW C
	LEFT JOIN USES U ON C.CREW_ID = U.MISSION_ID
GROUP BY
	C.NAME;
```
![select 2](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/select-2.jpg?raw=true)

### 3. ×¦×™×•×“ ×©××•×œ× ×‘×™×•×ª×¨ ×-3 ××©×™××•×ª
```sql
SELECT
	E.NAME AS EQUIPMENT_NAME,
	COUNT(U.MISSION_ID) AS MISSION_COUNT
FROM
	EQUIPMENT E
	JOIN USES U ON E.EQUIPMENT_ID = U.EQUIPMENT_ID
GROUP BY
	E.NAME
HAVING
	COUNT(U.MISSION_ID) > 3;
```
![select 3](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/select-3.jpg?raw=true)

### 4. ×©××•×ª ×”××•×©×‘×•×ª ×©×”×•×§××• ×œ×¤× ×™ 2010 ×•×©×˜×— ×”×¦×™×•×“ ×©× ×¨×›×© ×œ×›×œ ××—×ª
```sql
SELECT
	COL.NAME,
	SUM(CURRENT_DATE - E.PURCHASE_DATE) AS TOTAL_EQUIPMENT_AGE -- ××—×©×‘ ××ª ×”×”×¤×¨×© ×‘×™××™× ×‘×™×Ÿ ×ª××¨×™×š ×¨×›×™×©×ª ×”×¦×™×•×“ ×œ×ª××¨×™×š ×”× ×•×›×—×™
FROM
	COLONY COL
	JOIN MISSION M ON COL.COLONY_ID = M.COLONY_ID
	JOIN USES U ON M.MISSION_ID = U.MISSION_ID
	JOIN EQUIPMENT E ON U.EQUIPMENT_ID = E.EQUIPMENT_ID
WHERE
	COL.ESTABLISHED_DATE < '2010-01-01'
GROUP BY
	COL.NAME;
```
![select 4](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/select-4.jpg?raw=true)

### 5. ×—×•×§×¨×™× ×‘×ª×¤×§×™×“ ×¡×¤×¦×™×¤×™ ×•×¦×•×•×ª×™× ×©×¦×•×¨×¤×• ××œ×™×”×
```sql
SELECT
	R.NAME AS RESEARCHER_NAME,
	C.NAME AS CREW_NAME,
	C.ROLE
FROM
	RESEARCHER R
	JOIN CREW C ON R.CREW_ID = C.CREW_ID
WHERE
	C.ROLE = 'Engineer';
```
![select 5](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/select-5.jpg?raw=true)

### 6. ××¡×¤×¨ ×—×•×§×¨×™× ×©× ××¦××™× ×‘×›×œ ×¦×•×•×ª
```sql
SELECT
	C.NAME AS CREW_NAME,
	COUNT(R.RESEARCHER_ID) AS RESEARCHER_COUNT
FROM
	CREW C
	LEFT JOIN RESEARCHER R ON C.CREW_ID = R.CREW_ID
GROUP BY
	C.NAME;
```
![select 6](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/select-6.jpg?raw=true)

### 7. ×¤×¨×˜×™ ×”××™×›×©×•×¨ ×©× ×¨×›×© ×œ××—×¨ 2015
```sql
SELECT
	E.NAME,
	E.PURCHASE_DATE
FROM
	EQUIPMENT E
WHERE
	E.PURCHASE_DATE > '2015-01-01';
```
![select 7](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/select-7.jpg?raw=true)

### 8. ××™×“×¢ ×¢×œ ×”×¦×•×•×ª×™× ×•×”××©×™××•×ª ×©×œ×”× ×‘-2019
```sql
SELECT
	C.NAME AS CREW_NAME,
	M.NAME AS MISSION_NAME,
	M.START_DATE
FROM
	CREW C
	JOIN MISSION M ON C.COLONY_ID = M.COLONY_ID
WHERE
	EXTRACT(
		YEAR
		FROM
			M.START_DATE
	) = 2019;
```
![select 8](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/select-8.jpg?raw=true)

---

## ×©××™×œ×ª×•×ª UPDATE

### 1. ×¢×“×›×•×Ÿ ×ª××¨×™×š ×”×¦×˜×¨×¤×•×ª ×©×œ ×¦×•×•×ª×™× ×©×”×¦×˜×¨×¤×• ×œ×¤× ×™ 2015

```sql
UPDATE CREW
SET JOINED_DATE = '2015-01-01'
WHERE JOINED_DATE < '2015-01-01';
```
![before update 1](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/before-update-1.jpg?raw=true) - *before update 1*
![after update 1](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/after-update-1.jpg?raw=true) - *after update 1*


### 2. ×¢×“×›×•×Ÿ ×¡×˜×˜×•×¡ ×©×œ ×ª×©×ª×™×•×ª ×œ××•×©×‘×•×ª ×©×¤×¨×¡××• ××©×™××•×ª ×œ××—×¨ 2020

```sql
UPDATE INFRASTRUCTURE I
SET STATUS = 1
WHERE
	EXISTS (
		SELECT 1
		FROM COLONY C
			JOIN MISSION M ON C.COLONY_ID = M.COLONY_ID
		WHERE I.COLONY_ID = C.COLONY_ID
			AND M.START_DATE > '2020-01-01'
	);
```
![before update 2](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/before-update-2.jpg?raw=true) - *before update 2*
![after update 2](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/after-update-2.jpg?raw=true) - *after update 2*


### 3. ×¢×“×›×•×Ÿ ×ª×¤×§×™×“×™× ×©×œ ×—×•×§×¨×™× ×œ×¤×™ ×ª×—×•× ××—×§×¨

```sql
UPDATE CREW C
SET ROLE = 'Research Lead'
WHERE
	EXISTS (
		SELECT 1
		FROM RESEARCHER R
		WHERE R.CREW_ID = C.CREW_ID
			AND R.RESEARCH_FIELD = 'Elit LLC'
	);
```
![before update 3](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/before-update-3.jpg?raw=true) - *before update 3*
![after update 3](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/after-update-3.jpg?raw=true) - *after update 3*

---

## ×©××™×œ×ª×•×ª DELETE

### 1. ××—×™×§×ª ×©×™××•×© ×‘×¦×™×•×“ ×©×©×•×™×š ×œ×¤×—×•×ª ×œ-2 ××©×™××•×ª

```sql
DELETE FROM USES
WHERE
	EQUIPMENT_ID IN (
		SELECT E.EQUIPMENT_ID
		FROM EQUIPMENT E
			JOIN USES U ON E.EQUIPMENT_ID = U.EQUIPMENT_ID
		GROUP BY E.EQUIPMENT_ID
		HAVING COUNT(U.MISSION_ID) >= 2
	);
```
![before delete 1](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/before-delete-1.jpg?raw=true) - *before delete 1*
![after delete 1](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/after-delete-1.jpg?raw=true) - *after delete 1*

### 2. ××—×™×§×ª ×—×•×§×¨×™× ×©× ××¦××™× ×‘×¦×•×•×ª×™× ×©××‘×¦×¢×™× ××©×™××•×ª ××—×¨×™ 2020

```sql
DELETE FROM RESEARCHER
WHERE
	CREW_ID IN (
		SELECT C.CREW_ID
		FROM CREW C
			JOIN MISSION M ON C.COLONY_ID = M.COLONY_ID
		WHERE M.START_DATE > '2020-01-01'
	);
```
![before delete 2](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/before-delete-2.jpg?raw=true) - *before delete 2*
![after delete 2](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/after-delete-2.jpg?raw=true) - *after delete 2*

### 3. ××—×™×§×ª ×ª×©×ª×™×•×ª ×œ× ×¤×¢×™×œ×•×ª ××›×œ ×”××•×©×‘×•×ª

```sql
DELETE FROM INFRASTRUCTURE I WHERE I.STATUS = 2;
```
![before delete 3](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/before-delete-3.jpg?raw=true) - *before delete 3*
![after delete 3](https://github.com/H-Ariel/DBProject_0644_3156/blob/main/%D7%A9%D7%9C%D7%91%20%D7%91/screenshots/after-delete-3.jpg?raw=true) - *after delete 3*
